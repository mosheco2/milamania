<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××™×œ×× ×™×” - × ×™×”×•×œ ××©×—×§</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary-color: #F84779; --secondary-color: #15C4C1; --bg-color: #FFF8EA; --text-color: #2B1E4A; }
        body { font-family: "Varela Round", sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* ×‘×× ×¨ ×¢×œ×™×•×Ÿ */
        .header-area { width: 100%; max-width: 800px; margin-bottom: 20px; text-align: center; }
        .header-area img { width: 100%; height: auto; max-height: 200px; object-fit: cover; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        
        /* ×‘×× ×¨ ×ª×—×ª×•×Ÿ */
        .banner-slot { width: 100%; margin-top: 30px; }
        .banner-slot img { width: 100%; height: auto; max-height: 180px; object-fit: cover; border-radius: 20px; display: block; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }

        .container { background: #fff; border-radius: 30px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.08); width: 100%; max-width: 800px; transition: 0.3s; }
        h1, h2, h3 { text-align: center; color: var(--text-color); font-weight: 900; }
        h1 { font-size: 2.5rem; background: linear-gradient(135deg, var(--primary-color), var(--text-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
        
        .btn { width: 100%; padding: 15px; border-radius: 18px; border: none; font-weight: 800; font-size: 1.2rem; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; color: white; margin-bottom: 10px; }
        .btn:active { transform: scale(0.97); }
        .btn-primary { background: linear-gradient(135deg, var(--primary-color), #FF8566); box-shadow: 0 8px 20px rgba(248, 71, 121, 0.3); }
        .btn-success { background: linear-gradient(135deg, var(--secondary-color), #42E695); box-shadow: 0 8px 20px rgba(21, 196, 193, 0.3); }
        .btn-outline { background: transparent; border: 2px solid var(--primary-color); color: var(--primary-color); }
        .btn-small { padding: 8px 15px; font-size: 1rem; width: auto; display: inline-flex; }
        
        input, select { width: 100%; padding: 15px; border-radius: 18px; border: 2px solid rgba(43, 30, 74, 0.1); font-size: 1.1rem; font-weight: 600; text-align: center; margin-bottom: 15px; background: #FFFDF7; transition: 0.3s; font-family: inherit; }
        input:focus, select:focus { border-color: var(--primary-color); outline: none; background: #fff; }
        
        .hidden { display: none !important; }
        
        .game-code-display { background: #F0F0F0; padding: 20px; border-radius: 20px; text-align: center; margin: 20px 0; border: 3px dashed #CCC; position: relative; cursor: pointer; }
        .game-code-display h2 { font-size: 3.5rem; margin: 10px 0; color: var(--primary-color); letter-spacing: 5px; }
        .share-hint { font-size: 0.9rem; color: #888; margin-top: 5px; }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: #F8F7FF; padding: 20px; border-radius: 20px; }
        
        .team-list { list-style: none; padding: 0; }
        .team-list li { background: #fff; padding: 10px 15px; border-radius: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.03); }
        .team-score { font-weight: bold; font-size: 1.2rem; color: var(--primary-color); }
        
        #timer { font-size: 4rem; text-align: center; font-weight: 900; color: var(--primary-color); margin: 20px 0; font-variant-numeric: tabular-nums; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }
        
        /* ××™×ª×•×’ */
        .brand-preview { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        .brand-logo-container { background: #fff; padding: 10px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid #eee; display: none; }
        .brand-logo { height: 60px; width: auto; object-fit: contain; display: block; }
        .brand-text { text-align: right; }
        .brand-title-text { font-size: 1.5rem; font-weight: 900; color: var(--text-color); margin: 0; line-height: 1.1; }
        .brand-slogan-text { font-size: 1rem; color: #666; margin: 2px 0 0 0; font-weight: 600; }

        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
            h1 { font-size: 2rem; }
            #timer { font-size: 3rem; }
            .container { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="header-area hidden" id="top-banner-area">
        <a id="top-banner-link" href="#" target="_blank">
            <img id="top-banner-img" src="" alt="×‘×× ×¨ ×¢×œ×™×•×Ÿ">
        </a>
    </div>

    <div class="container">
        <div id="brandingSection" class="brand-preview hidden">
            <div class="brand-text">
                <h1 id="brandTitle" class="brand-title-text hidden"></h1>
                <p id="brandSlogan" class="brand-slogan-text hidden"></p>
            </div>
             <div id="brandLogoBox" class="brand-logo-container">
                <img id="brandLogo" class="brand-logo" src="" alt="×œ×•×’×•">
            </div>
        </div>

        <div id="createGameSection">
            <h1>×™×¦×™×¨×ª ××©×—×§ ×—×“×©</h1>
            <p style="text-align:center; color:#666; margin-bottom:30px;">×”×’×“×™×¨×• ××ª ×”××©×—×§ ×•×”×–××™× ×• ×—×‘×¨×™×!</p>
            
            <label>×©× ×”×× ×”×œ (××ª×”)</label>
            <input id="hostNameInput" type="text" placeholder="×œ×“×•×’××”: ×“× ×™ ×”××œ×š">
            
            <div class="grid-2">
                <div>
                    <label>×™×¢×“ × ×§×•×“×•×ª ×œ× ×™×¦×—×•×Ÿ</label>
                    <input id="targetScoreInput" type="number" value="50" min="10" step="5">
                </div>
                <div>
                    <label>×–××Ÿ ×œ×¡×™×‘×•×‘ (×©× ×™×•×ª)</label>
                    <input id="roundTimeInput" type="number" value="60" min="30" step="10">
                </div>
            </div>

            <label>×§×˜×’×•×¨×™×•×ª ××™×œ×™× (×‘×—×¨ ×œ×¤×—×•×ª ××—×ª)</label>
            <select id="categoriesInput" multiple style="height: 120px;">
                <option value="all" selected>ğŸ² ×”×›×œ ××”×›×œ (××•××œ×¥!)</option>
                <option value="food">ğŸ• ××•×›×œ ×•×©×ª×™×™×”</option>
                <option value="animals">ğŸ¦ ×‘×¢×œ×™ ×—×™×™×</option>
                <option value="objects">ğŸ’¡ ×—×¤×¦×™× ×“×•×××™×</option>
                <option value="sports">âš½ ×¡×¤×•×¨×˜</option>
                <option value="professions">ğŸ‘® ××§×¦×•×¢×•×ª</option>
                <option value="technology">ğŸ’» ×˜×›× ×•×œ×•×’×™×”</option>
                <option value="nature">ğŸŒ³ ×˜×‘×¢</option>
                <option value="home">ğŸ  ×‘×™×ª</option>
                <option value="clothing">ğŸ‘• ×‘×™×’×•×“</option>
                <option value="emotions">ğŸ˜ ×¨×’×©×•×ª</option>
                <option value="transport">ğŸš— ×ª×—×‘×•×¨×”</option>
                <option value="instruments">ğŸ¸ ×›×œ×™ × ×’×™× ×”</option>
                <option value="countries">ğŸŒ ××“×™× ×•×ª</option>
                <option value="colors">ğŸ¨ ×¦×‘×¢×™×</option>
                <option value="verbs">ğŸƒ ×¤×¢×œ×™×</option>
            </select>

             <label>××™×œ×™× ××•×ª×××•×ª ××™×©×™×ª (××•×¤×¨×“×•×ª ×‘×¤×¡×™×§×™×) - ××•×¤×¦×™×•× ×œ×™</label>
            <textarea id="customWordsInput" placeholder="×œ×“×•×’××”: ×¡×•×¡, ×‘×™×ª ×¡×¤×¨, ×”××•×¨×” ×¨×™× ×”" style="width:100%; padding:15px; border-radius:18px; border:2px solid rgba(43,30,74,0.1); font-size:1rem; background:#FFFDF7; min-height:80px; font-family:inherit; margin-bottom:15px;"></textarea>
            
            <button id="createGameBtn" class="btn btn-primary">âœ¨ ×¦×•×¨ ××©×—×§ ×•×”×ª×—×œ!</button>
        </div>

        <div id="gameLobbySection" class="hidden">
            <h1>×œ×•×‘×™ ×”××ª× ×”</h1>
            
            <div class="game-code-display" id="shareCodeBtn" onclick="copyInviteLink()">
                <span style="font-size:1.2rem;">×§×•×“ ×”××©×—×§ ×©×œ×›×:</span>
                <h2 id="displayGameCode">XXXX</h2>
                <div class="share-hint">×œ×—×¦×• ×›××Ÿ ×›×“×™ ×œ×”×¢×ª×™×§ ×§×™×©×•×¨ ×œ×”×–×× ×” ğŸ“‹</div>
            </div>

            <div id="teamsContainer" class="grid-2">
                </div>
             <div style="margin-top: 20px; text-align: center;">
                <button id="addTeamBtn" class="btn btn-outline btn-small">â• ×”×•×¡×£ ×§×‘×•×¦×”</button>
            </div>

            <div style="margin-top: 30px;">
                 <h3 style="text-align:center; margin-bottom:15px;">×”×’×“×¨×•×ª ×¡×™×‘×•×‘ ×¨××©×•×Ÿ</h3>
                 <div class="grid-2">
                    <div>
                        <label>×§×‘×•×¦×” ××ª×—×™×œ×”</label>
                        <select id="startTeamSelect"></select>
                    </div>
                    <div>
                         <label>×©×—×§×Ÿ ××¡×‘×™×¨ (××•×¤×¦×™×•× ×œ×™)</label>
                         <select id="startPlayerSelect"><option value="">×‘×—×™×¨×” ××§×¨××™×ª</option></select>
                    </div>
                 </div>
                <button id="startGameBtn" class="btn btn-success" style="margin-top:20px;">ğŸš€ ×”×ª×—×œ ××ª ×”××©×—×§!</button>
            </div>
        </div>

        <div id="gameRoundSection" class="hidden" style="text-align: center;">
            <h2 id="roundStatus">×¡×™×‘×•×‘ ×¤×¢×™×œ</h2>
            <h3 style="color:#666;">×”××¡×‘×™×¨: <span id="currentExplainer" style="color:var(--primary-color);"></span></h3>
            
            <div id="timer">00:00</div>
            
            <div class="grid-2">
                <div class="card">
                    <h3>× ×™×§×•×“ ×‘×¡×™×‘×•×‘ ×–×”</h3>
                    <div id="currentRoundScore" style="font-size:3rem; font-weight:900; color:var(--secondary-color);">0</div>
                </div>
                <div class="card">
                     <h3>×§×‘×•×¦×” ××©×—×§×ª</h3>
                     <div id="currentPlayingTeam" style="font-size:1.5rem; font-weight:bold;"></div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <button id="endRoundBtn" class="btn btn-danger">ğŸ›‘ ×¡×™×™× ×¡×™×‘×•×‘ ×™×“× ×™×ª</button>
            </div>
            
             <div style="margin-top: 30px; border-top: 2px solid #eee; padding-top: 20px;">
                <h3>ğŸ† ×˜×‘×œ×ª × ×™×§×•×“ ×›×œ×œ×™×ª</h3>
                 <div id="liveScoreboard" class="grid-2" style="margin-top:15px;"></div>
            </div>
        </div>

        <div id="gameOverSection" class="hidden" style="text-align: center;">
             <h1>ğŸ‰ ×”××©×—×§ ×”×¡×ª×™×™×! ğŸ‰</h1>
             <h2 style="color:var(--secondary-color);">×”×§×‘×•×¦×” ×”×× ×¦×—×ª: <span id="winningTeamName" style="font-size:3rem; display:block; margin:10px 0;"></span></h2>
             
             <div id="finalScoreboard" style="margin: 30px 0;"></div>
             
             <button onclick="location.reload()" class="btn btn-primary">ğŸ”„ ××©×—×§ ×—×“×©</button>
        </div>

        <div id="host-banner-slot" class="banner-slot hidden">
            <a id="host-banner-link" href="#" target="_blank">
                <img id="host-banner-img" src="" alt="×¤×¨×¡×•××ª ×ª×—×ª×•× ×”">
            </a>
        </div>

    </div> <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let myGameCode = null;
        let gameState = null;

        // ××œ×× ×˜×™×
        const sections = {
            create: document.getElementById("createGameSection"),
            lobby: document.getElementById("gameLobbySection"),
            round: document.getElementById("gameRoundSection"),
            over: document.getElementById("gameOverSection")
        };
        const brandingSection = document.getElementById('brandingSection');

        // ×¤×•× ×§×¦×™×•×ª ×¢×–×¨
        function showSection(sectionId) {
            Object.values(sections).forEach(el => el.classList.add("hidden"));
            sections[sectionId].classList.remove("hidden");
        }

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60).toString().padStart(2, '0');
            const s = (seconds % 60).toString().padStart(2, '0');
            return `${m}:${s}`;
        }

        function copyInviteLink() {
            const link = `${window.location.origin}/player.html?code=${myGameCode}`;
            navigator.clipboard.writeText(link).then(() => {
                alert("×”×§×™×©×•×¨ ×”×•×¢×ª×§ ×œ×œ×•×—! ×©×ª×¤×• ××•×ª×• ×¢× ×”×—×‘×¨×™×.");
            });
        }

        // × ×™×”×•×œ ×‘×× ×¨×™× ×•××™×ª×•×’
        let bannersData = null;
        
        function getBannerUrl(bannerObj) {
            if (!bannerObj) return null;
            const isMobile = window.innerWidth <= 768;
            return (isMobile && bannerObj.imgMobile) ? bannerObj.imgMobile : bannerObj.img;
        }

        function updateBanners() {
            if (!bannersData) return;

            // ×‘×× ×¨ ×¢×œ×™×•×Ÿ
            const topImgUrl = getBannerUrl(bannersData.topBanner);
            if (topImgUrl) {
                document.getElementById("top-banner-img").src = topImgUrl;
                document.getElementById("top-banner-link").href = bannersData.topBanner.link || "#";
                document.getElementById("top-banner-area").classList.remove("hidden");
            } else {
                document.getElementById("top-banner-area").classList.add("hidden");
            }

            // ×‘×× ×¨ ×ª×—×ª×•×Ÿ (×”×—×“×©)
            const bottomImgUrl = getBannerUrl(bannersData.bottomBanner);
            if (bottomImgUrl) {
                document.getElementById("host-banner-img").src = bottomImgUrl;
                document.getElementById("host-banner-link").href = bannersData.bottomBanner.link || "#";
                document.getElementById("host-banner-slot").classList.remove("hidden");
            } else {
                document.getElementById("host-banner-slot").classList.add("hidden");
            }
        }

        // ×˜×¢×™× ×ª ×‘×× ×¨×™×
        fetch("/api/banners").then(r=>r.json()).then(d => {
            bannersData = d;
            updateBanners();
        });
        window.addEventListener('resize', updateBanners);

        // ×‘×“×™×§×ª ××™×ª×•×’ ××”-URL
        const urlParams = new URLSearchParams(window.location.search);
        const brandTitle = urlParams.get('title');
        const brandSlogan = urlParams.get('slogan');
        const brandLogo = urlParams.get('logo');
        const brandColor = urlParams.get('color');
        let brandingData = null;

        if(brandTitle || brandLogo || brandColor) {
            if(brandColor) document.documentElement.style.setProperty('--bg-color', '#' + brandColor);
            
            brandingSection.classList.remove('hidden');
            if(brandTitle) {
                document.getElementById('brandTitle').textContent = brandTitle;
                document.getElementById('brandTitle').classList.remove('hidden');
            }
            if(brandSlogan) {
                document.getElementById('brandSlogan').textContent = brandSlogan;
                document.getElementById('brandSlogan').classList.remove('hidden');
            }
            if(brandLogo) {
                document.getElementById('brandLogo').src = brandLogo;
                document.getElementById('brandLogoBox').style.display = 'block';
            }

            brandingData = { title: brandTitle, slogan: brandSlogan, logo: brandLogo, color: brandColor };
            // ×”×¡×ª×¨×ª ×©×“×•×ª ××™×ª×•×’ ×‘×˜×•×¤×¡ ×× ×”× ××’×™×¢×™× ××”-URL
            // document.getElementById('brandingFields').style.display = 'none'; // ×× ×”×™×” ×§×™×™×
        }

        // ×œ×•×’×™×§×ª ××©×—×§
        document.getElementById("createGameBtn").addEventListener("click", () => {
            const hostName = document.getElementById("hostNameInput").value.trim();
            if(!hostName) return alert("×× × ×”×–×™× ×• ×©× ×× ×”×œ");

            const categories = Array.from(document.getElementById("categoriesInput").selectedOptions).map(o => o.value);
            
            socket.emit("createGame", {
                hostName,
                targetScore: document.getElementById("targetScoreInput").value,
                defaultRoundSeconds: document.getElementById("roundTimeInput").value,
                categories,
                customWords: document.getElementById("customWordsInput").value,
                branding: brandingData,
                teamNames: { A: "×§×‘×•×¦×” A", B: "×§×‘×•×¦×” B" } // ×‘×¨×™×¨×ª ××—×“×œ
            }, (res) => {
                if(res.ok) {
                    myGameCode = res.gameCode;
                    gameState = res.game;
                    document.getElementById("displayGameCode").textContent = myGameCode;
                    showSection("lobby");
                    renderLobby();
                } else {
                    alert("×©×’×™××”: " + res.error);
                }
            });
        });

        function renderLobby() {
            if(!gameState) return;
            const container = document.getElementById("teamsContainer");
            container.innerHTML = '';
            
            const startTeamSelect = document.getElementById("startTeamSelect");
            startTeamSelect.innerHTML = '';

            Object.values(gameState.teams).forEach(team => {
                // ×›×¨×˜×™×¡ ×§×‘×•×¦×”
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <h3>${team.name}</h3>
                    <ul class="team-list" id="team-list-${team.id}"></ul>
                `;
                container.appendChild(card);

                // ×¨×©×™××ª ×©×—×§× ×™×
                const list = card.querySelector(`#team-list-${team.id}`);
                team.players.forEach(playerId => {
                    const player = gameState.playersByClientId[playerId];
                    if(player) {
                        list.innerHTML += `<li>${player.name} <button class="btn-danger btn-small" onclick="removePlayer('${player.clientId}')">×”×¡×¨</button></li>`;
                    }
                });

                // ×”×•×¡×¤×” ×œ×‘×—×™×¨×ª ×§×‘×•×¦×” ××ª×—×™×œ×”
                startTeamSelect.innerHTML += `<option value="${team.id}">${team.name}</option>`;
            });

            updateStartPlayerSelect();
        }

        document.getElementById("startTeamSelect").addEventListener("change", updateStartPlayerSelect);

        function updateStartPlayerSelect() {
            const teamId = document.getElementById("startTeamSelect").value;
            const playerSelect = document.getElementById("startPlayerSelect");
            playerSelect.innerHTML = '<option value="">×‘×—×™×¨×” ××§×¨××™×ª</option>';
            
            if(gameState.teams[teamId]) {
                gameState.teams[teamId].players.forEach(playerId => {
                    const player = gameState.playersByClientId[playerId];
                    if(player) {
                        playerSelect.innerHTML += `<option value="${player.clientId}">${player.name}</option>`;
                    }
                });
            }
        }

        window.removePlayer = function(clientId) {
            if(confirm("×œ×”×¡×™×¨ ××ª ×”×©×—×§×Ÿ?")) {
                socket.emit("removePlayer", { gameCode: myGameCode, clientId });
            }
        }

        document.getElementById("addTeamBtn").addEventListener("click", () => {
            const newId = "Team_" + Date.now(); // ××–×”×” ×–×× ×™
            // ×›××Ÿ × ×“×¨×© ××™××•×© ×‘×©×¨×ª ×œ×”×•×¡×¤×ª ×§×‘×•×¦×” ×“×™× ××™×ª, ×›×¨×’×¢ ×–×” ×¨×§ UI
            alert("×”×•×¡×¤×ª ×§×‘×•×¦×•×ª ×“×™× ××™×ª ×“×•×¨×©×ª ×¢×“×›×•×Ÿ ×‘×©×¨×ª.");
        });

        document.getElementById("startGameBtn").addEventListener("click", () => {
             const teamId = document.getElementById("startTeamSelect").value;
             const explainerId = document.getElementById("startPlayerSelect").value;
             socket.emit("startRound", { gameCode: myGameCode, teamId, explainerClientId: explainerId || null }, (res) => {
                 if(!res.ok) alert(res.error);
             });
        });

        document.getElementById("endRoundBtn").addEventListener("click", () => {
            if(confirm("×œ×¡×™×™× ××ª ×”×¡×™×‘×•×‘ ×”× ×•×›×—×™?")) {
                socket.emit("endRound", { gameCode: myGameCode });
            }
        });

        socket.on("gameUpdated", (game) => {
            gameState = game;
            if(sections.lobby.classList.contains("hidden") === false) {
                renderLobby();
            }
            renderScoreboard();
        });

        socket.on("roundStarted", (data) => {
            gameState = data.game;
            showSection("round");
            document.getElementById("currentExplainer").textContent = gameState.currentRound.explainerName;
            document.getElementById("currentPlayingTeam").textContent = gameState.teams[gameState.currentRound.teamId].name;
            document.getElementById("currentRoundScore").textContent = "0";
        });

        socket.on("roundTick", (data) => {
            document.getElementById("timer").textContent = formatTime(data.secondsLeft);
        });

        socket.on("roundScoreUpdated", (data) => {
            document.getElementById("currentRoundScore").textContent = data.roundScore;
        });

        socket.on("roundTimeUp", (data) => {
             // ××¤×©×¨ ×œ×”×•×¡×™×£ ×›××Ÿ ××•×“×œ ×¡×™×›×•× ×¡×™×‘×•×‘
             // ×›×¨×’×¢ ×”×©×¨×ª ×©×•×œ×— ×¢×“×›×•×Ÿ ××©×—×§ ×©××¢×‘×™×¨ ×—×–×¨×” ×œ×œ×•×‘×™
        });

        socket.on("gameOver", (data) => {
            showSection("over");
            document.getElementById("winningTeamName").textContent = data.winningTeam;
            renderFinalScoreboard();
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        });

        function renderScoreboard() {
            const sb = document.getElementById("liveScoreboard");
            sb.innerHTML = '';
            Object.values(gameState.teams).forEach(t => {
                sb.innerHTML += `<div class="card" style="text-align:center;"><h4>${t.name}</h4><div class="team-score">${t.score}</div></div>`;
            });
        }

        function renderFinalScoreboard() {
             const sb = document.getElementById("finalScoreboard");
             sb.innerHTML = '';
             Object.values(gameState.teams)
                 .sort((a,b) => b.score - a.score)
                 .forEach(t => {
                     sb.innerHTML += `<div style="font-size:1.5rem; margin:10px;">${t.name}: <strong>${t.score}</strong> × ×§'</div>`;
                 });
        }

        // ×× ×™×¢×ª ×™×¦×™××” ×‘×˜×¢×•×ª
        window.onbeforeunload = function() {
            if (myGameCode) {
                return "×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×¦××ª? ×”××©×—×§ ×™×™×¡×’×¨.";
            }
        };
    </script>
</body>
</html>
