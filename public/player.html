<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>××™×œ×× ×™×” - ××¡×š ×©×—×§×Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ×¤×•× ×˜ ×ª×•×× ×œ×× ×”×œ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

  <style>
    :root {
      font-size: 16px;
    }
    * {
      box-sizing: border-box;
      font-family: "Varela Round", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      padding: 0;
      background: #FFF8EA;
      color: #2B1E4A;
      min-height: 100vh;
      font-size: 1rem;
      position: relative;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      width: 260px;
      height: 260px;
      border-radius: 50%;
      z-index: -1;
    }
    body::before {
      top: -130px;
      left: -70px;
      background: radial-gradient(circle at center,
        rgba(248, 71, 121, 0.30),
        transparent 60%);
    }
    body::after {
      bottom: -150px;
      right: -50px;
      background: radial-gradient(circle at center,
        rgba(21, 196, 193, 0.28),
        transparent 60%);
    }

    .app {
      max-width: 640px;
      width: 100%;
      padding: 18px 12px 32px;
      margin: 0 auto;
    }

    .card {
      background: #FFFFFF;
      border-radius: 24px;
      padding: 16px 14px 18px;
      box-shadow: 0 16px 34px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(43, 30, 74, 0.06);
      margin-bottom: 14px;
    }

    h1, h2, h3 {
      margin: 0;
    }

    label {
      display: block;
      margin-bottom: 4px;
      font-size: 0.9rem;
      color: #6B618F;
    }

    input, select {
      width: 100%;
      padding: 9px 11px;
      border-radius: 14px;
      border: 1px solid rgba(43, 30, 74, 0.22);
      background: #FFFDF7;
      color: #2B1E4A;
      font-size: 0.98rem;
    }

    input::placeholder,
    select::placeholder {
      color: #B0A6CC;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: #F84779;
      box-shadow: 0 0 0 1px rgba(248, 71, 121, 0.55);
    }

    .row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .row > div {
      flex: 1 1 180px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 9px 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.96rem;
      font-weight: 600;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.15s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #F84779, #F7C948);
      color: #2B1E4A;
      box-shadow: 0 10px 24px rgba(248, 71, 121, 0.35);
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(248, 71, 121, 0.5);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid rgba(107, 97, 143, 0.55);
      color: #6B618F;
    }
    .btn-ghost:hover {
      background: rgba(248, 249, 255, 0.9);
    }

    .btn-small {
      padding: 6px 10px;
      font-size: 0.86rem;
    }

    .btn-wide {
      width: 100%;
      justify-content: center;
    }

    .btn[disabled] {
      opacity: 0.55;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(180, 169, 214, 0.7);
      font-size: 0.78rem;
      color: #58457F;
      gap: 6px;
      background: radial-gradient(circle at top left,
        rgba(248, 71, 121, 0.18),
        rgba(255, 255, 255, 0.96));
      margin-bottom: 4px;
    }

    .status-text {
      font-size: 0.9rem;
      color: #7C7598;
    }

    .logo-small {
      height: 46px;
      width: auto;
      border-radius: 16px;
      object-fit: contain;
      background: #FFFFFF;
      padding: 3px 8px;
      border: 1px solid rgba(180, 169, 214, 0.65);
      box-shadow:
        0 0 0 3px #FFF8EA,
        0 10px 24px rgba(0,0,0,0.10);
    }

    .hidden {
      display: none !important;
    }

    .page-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 4px;
    }

    #playerRoundTimer {
      margin-top: 4px;
      font-size: 1.7rem;
      font-weight: 800;
      letter-spacing: 0.06em;
      color: #F84779;
      text-align: center;
    }

    .score-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 0;
      font-size: 0.96rem;
    }

    .score-row.me {
      font-weight: 700;
      color: #F84779;
    }

    .team-label {
      font-weight: 600;
    }

    .players-list {
      font-size: 0.86rem;
      color: #5A4E80;
      margin-top: 4px;
    }

    .players-list span {
      display: inline-block;
      margin-inline-end: 4px;
      margin-bottom: 2px;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(248, 247, 255, 0.9);
      border: 1px solid rgba(180, 169, 214, 0.5);
    }

    @media (max-width: 480px) {
      body {
        font-size: 1.04rem;
      }
      .app {
        padding: 14px 8px 26px;
      }
      .card {
        border-radius: 20px;
      }
      #playerRoundTimer {
        font-size: 1.9rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="page-head">
        <div>
          <div class="chip">××™×œ×× ×™×” Â· ××¡×š ×©×—×§×Ÿ ğŸ®</div>
          <h1 style="margin-top:4px; font-size:1.5rem;">×‘×¨×•×š ×”×‘× ×œ××©×—×§</h1>
        </div>
        <img id="player-logo" class="logo-small hidden" alt="××™×œ×× ×™×” ×œ×•×’×•" />
      </div>
      <p class="status-text" id="topStatus">
        ×”×¦×˜×¨×£ ×œ××©×—×§ ×¢× ×§×•×“ ×”××©×—×§ ×©×§×™×‘×œ×ª ××”×—×‘×¨/×” ×©×× ×”×œ/×ª ××ª ×”×—×“×¨.
      </p>
    </div>

    <!-- ×”×¦×˜×¨×¤×•×ª ×œ××©×—×§ -->
    <div class="card" id="joinSection">
      <h3 style="margin-bottom:6px;">×”×¦×˜×¨×¤×•×ª ×œ××©×—×§</h3>
      <div class="row">
        <div>
          <label for="gameCodeInput">×§×•×“ ××©×—×§</label>
          <input id="gameCodeInput" type="text" placeholder="×œ×“×•×’××”: AB3D" />
        </div>
        <div>
          <label for="playerNameInput">×”×©× ×©×œ×™ ×‘××©×—×§</label>
          <input id="playerNameInput" type="text" placeholder="×©× ××¦×—×™×§ ×–×” ×—×•×‘×” ğŸ˜„" />
        </div>
      </div>
      <div class="row">
        <div>
          <label for="joinTeamSelect">×‘×—×¨ ×§×‘×•×¦×”</label>
          <select id="joinTeamSelect">
            <option value="">×™×™×‘×—×¨ ××—×¨×™ ×˜×¢×™× ×ª ×”××©×—×§</option>
          </select>
        </div>
      </div>
      <button id="joinBtn" class="btn btn-primary btn-wide" type="button">×”×¦×˜×¨×¤×•×ª ×œ××©×—×§</button>
      <div id="joinError" class="status-text" style="margin-top:6px; color:#b91c1c;"></div>
    </div>

    <!-- ××–×•×¨ ××©×—×§ ×œ××—×¨ ×”×¦×˜×¨×¤×•×ª -->
    <div id="gameSection" class="hidden">
      <div class="card">
        <div class="page-head">
          <div>
            <div id="playerChip" class="chip hidden"></div>
            <h3 style="margin-top:4px; font-size:1.1rem;">××¦×‘ ××©×—×§</h3>
          </div>
          <button id="leaveBtn" class="btn btn-ghost btn-small" type="button">×™×¦×™××” ××”×—×“×¨</button>
        </div>
        <div id="roundStatusPlayer" class="status-text"></div>
        <div id="playerRoundTimer">×˜×™×™××¨: --:--</div>
      </div>

      <div class="card">
        <h3 style="margin-bottom:6px;">× ×™×§×•×“ ×•×§×‘×•×¦×•×ª</h3>
        <div id="playerScoreTarget" class="status-text"></div>
        <div id="playerScoreboard"></div>

        <hr style="border:none; border-top:1px solid rgba(180,169,214,0.5); margin:10px 0;" />

        <h3 style="margin-bottom:4px; font-size:0.95rem;">×©×—×§× ×™ ×”×§×‘×•×¦×” ×©×œ×™</h3>
        <div id="myTeamPlayers" class="players-list"></div>

        <div id="player-banner-slot" style="margin-top:8px;"></div>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    let currentGameCode = null;
    let lastGameState = null;
    let myClientId = null;
    let myTeamId = null;
    let myName = "";

    const joinSection = document.getElementById("joinSection");
    const gameSection = document.getElementById("gameSection");

    const gameCodeInput = document.getElementById("gameCodeInput");
    const playerNameInput = document.getElementById("playerNameInput");
    const joinTeamSelect = document.getElementById("joinTeamSelect");
    const joinBtn = document.getElementById("joinBtn");
    const joinError = document.getElementById("joinError");

    const playerChip = document.getElementById("playerChip");
    const topStatus = document.getElementById("topStatus");
    const leaveBtn = document.getElementById("leaveBtn");

    const roundStatusPlayerEl = document.getElementById("roundStatusPlayer");
    const playerRoundTimerEl = document.getElementById("playerRoundTimer");
    const playerScoreTargetEl = document.getElementById("playerScoreTarget");
    const playerScoreboardEl = document.getElementById("playerScoreboard");
    const myTeamPlayersEl = document.getElementById("myTeamPlayers");
    const playerLogoEl = document.getElementById("player-logo");
    const playerBannerSlot = document.getElementById("player-banner-slot");

    function formatTime(seconds) {
      const s = Math.max(0, Math.floor(seconds || 0));
      const m = Math.floor(s / 60).toString().padStart(2, "0");
      const ss = (s % 60).toString().padStart(2, "0");
      return m + ":" + ss;
    }

    function updateTimerFromGame(game) {
      if (!playerRoundTimerEl) return;

      if (!game || !game.currentRound) {
        playerRoundTimerEl.textContent = "×˜×™×™××¨: --:--";
        return;
      }

      const r = game.currentRound;
      const isActive = (typeof r.isActive === "boolean") ? r.isActive : !!r.active;
      const secondsLeft = (typeof r.secondsLeft === "number")
        ? r.secondsLeft
        : (r.roundSeconds || 0);

      if (!isActive) {
        playerRoundTimerEl.textContent = "×˜×™×™××¨: --:--";
        return;
      }

      playerRoundTimerEl.textContent = "×˜×™×™××¨: " + formatTime(secondsLeft);
    }

    function updateJoinTeamSelect(game, preferredTeamId) {
      if (!joinTeamSelect || !game || !game.teams) return;

      const prev = joinTeamSelect.value;
      joinTeamSelect.innerHTML = "";

      const teams = game.teams;
      const ids = Object.keys(teams);
      if (!ids.length) {
        const opt = document.createElement("option");
        opt.value = "";
        opt.textContent = "××™×Ÿ ×§×‘×•×¦×•×ª ×–××™× ×•×ª ×›×¨×’×¢";
        joinTeamSelect.appendChild(opt);
        return;
      }

      ids.forEach((tid) => {
        const team = teams[tid];
        const opt = document.createElement("option");
        opt.value = tid;
        opt.textContent = team.name || ("×§×‘×•×¦×” " + tid);
        joinTeamSelect.appendChild(opt);
      });

      let toSelect = preferredTeamId || prev;
      if (!toSelect || !teams[toSelect]) {
        toSelect = ids[0];
      }
      if (teams[toSelect]) {
        joinTeamSelect.value = toSelect;
      }
    }

    function renderGameStateForPlayer(game) {
      lastGameState = game;

      if (!game) {
        playerScoreTargetEl.textContent = "";
        playerScoreboardEl.innerHTML = "";
        myTeamPlayersEl.innerHTML = "";
        roundStatusPlayerEl.textContent = "×œ× ××—×•×‘×¨ ×œ××©×—×§ ×›×¨×’×¢.";
        updateTimerFromGame(null);
        return;
      }

      if (!currentGameCode && game.code) {
        currentGameCode = game.code;
      }

      if (game.targetScore) {
        playerScoreTargetEl.textContent = `×”××©×—×§ ×¢×“ ${game.targetScore} × ×§×•×“×•×ª`;
      } else {
        playerScoreTargetEl.textContent = "";
      }

      // × ×™×§×•×“ ×›×œ×œ×™
      if (playerScoreboardEl) {
        playerScoreboardEl.innerHTML = "";
        if (game.teams) {
          Object.entries(game.teams).forEach(([teamId, team]) => {
            const row = document.createElement("div");
            row.className = "score-row";
            if (myTeamId && myTeamId === teamId) {
              row.classList.add("me");
            }

            const nameSpan = document.createElement("span");
            nameSpan.className = "team-label";
            nameSpan.textContent = team.name || `×§×‘×•×¦×” ${teamId}`;

            const scoreSpan = document.createElement("span");
            scoreSpan.textContent = team.score || 0;

            row.appendChild(nameSpan);
            row.appendChild(scoreSpan);
            playerScoreboardEl.appendChild(row);
          });
        }
      }

      // ×©×—×§× ×™ ×”×§×‘×•×¦×” ×©×œ×™
      if (myTeamPlayersEl) {
        myTeamPlayersEl.innerHTML = "";
        if (myTeamId && game.teams && game.teams[myTeamId]) {
          const team = game.teams[myTeamId];
          const playersMap = game.players || {};
          if (Array.isArray(team.players) && team.players.length) {
            team.players.forEach((cid) => {
              const p = playersMap[cid];
              const name = (p && p.name) ? p.name : cid;
              const span = document.createElement("span");
              span.textContent = name;
              myTeamPlayersEl.appendChild(span);
            });
          } else {
            myTeamPlayersEl.textContent = "××™×Ÿ ×¢×“×™×™×Ÿ ×©×—×§× ×™× ×‘×§×‘×•×¦×”.";
          }
        } else {
          myTeamPlayersEl.textContent = "×œ× ×©×•×™×›×ª ×¢×“×™×™×Ÿ ×œ×§×‘×•×¦×”.";
        }
      }

      // ×¡×˜×˜×•×¡ ×¡×™×‘×•×‘
      if (roundStatusPlayerEl) {
        const r = game.currentRound;
        if (r && r.teamId) {
          const t = game.teams && game.teams[r.teamId];
          const teamName = t ? (t.name || `×§×‘×•×¦×” ${r.teamId}`) : "";
          const explainerName = r.explainerName || "";

          let txt = `×”×¡×™×‘×•×‘ ×¢×›×©×™×• ×©×œ ×”×§×‘×•×¦×”: ${teamName}`;
          if (explainerName) {
            txt += ` Â· ×”××¡×‘×™×¨: ${explainerName}`;
          }

          if (myTeamId && myTeamId === r.teamId) {
            txt += " Â· ×–×” ×”×ª×•×¨ ×©×œ ×”×§×‘×•×¦×” ×©×œ×š!";
          }

          roundStatusPlayerEl.textContent = txt;
        } else {
          roundStatusPlayerEl.textContent = "××™×Ÿ ×›×¨×’×¢ ×¡×™×‘×•×‘ ×¤×¢×™×œ. ××—×›×™× ×œ×× ×”×œ ×”××©×—×§.";
        }
      }

      updateTimerFromGame(game);

      // ×× ×˜×¨× ×”×¦×˜×¨×¤× ×• â€“ ×œ×¢×“×›×Ÿ ×‘×—×™×¨×ª ×§×‘×•×¦×” ×‘××¡×š ×”×¦×˜×¨×¤×•×ª
      if (!myClientId) {
        updateJoinTeamSelect(game);
      }
    }

    // ×”×¦×˜×¨×¤×•×ª ×œ××©×—×§
    function joinGameAsPlayer(code, name, teamIdFromUrl) {
      const trimmedCode = (code || "").toUpperCase().trim();
      const trimmedName = (name || "").trim();
      if (!trimmedCode) {
        joinError.textContent = "× × ×œ×”×–×™×Ÿ ×§×•×“ ××©×—×§.";
        return;
      }
      if (!trimmedName) {
        joinError.textContent = "× × ×œ×”×–×™×Ÿ ×©× ×©×—×§×Ÿ.";
        return;
      }

      let chosenTeamId = teamIdFromUrl || (joinTeamSelect && joinTeamSelect.value) || "";

      socket.emit(
        "joinGame",
        { gameCode: trimmedCode, name: trimmedName, teamId: chosenTeamId },
        (resp) => {
          if (!resp || !resp.ok) {
            joinError.textContent = resp && resp.error ? resp.error : "×©×’×™××” ×‘×”×¦×˜×¨×¤×•×ª ×œ××©×—×§.";
            return;
          }

          currentGameCode = trimmedCode;
          myClientId = resp.clientId;
          myTeamId = resp.teamId;
          myName = trimmedName;
          joinError.textContent = "";

          if (joinSection) joinSection.classList.add("hidden");
          if (gameSection) gameSection.classList.remove("hidden");

          if (topStatus) {
            topStatus.textContent = `××—×•×‘×¨ ×œ××©×—×§ ${trimmedCode}. ×ª×”× ×•!`;
          }

          if (playerChip) {
            playerChip.textContent = `${myName} Â· ${myTeamId}`;
            playerChip.classList.remove("hidden");
          }

          if (resp.game) {
            renderGameStateForPlayer(resp.game);
          }
        }
      );
    }

    if (joinBtn) {
      joinBtn.addEventListener("click", () => {
        const code = gameCodeInput.value;
        const name = playerNameInput.value;
        joinGameAsPlayer(code, name, null);
      });
    }

    // ×›×¤×ª×•×¨ ×™×¦×™××” ××”×—×“×¨ (×œ×¡×¢×™×£ 6 ×‘×”××©×š)
    if (leaveBtn) {
      leaveBtn.addEventListener("click", () => {
        // ×™×¦×™××” ×¤×©×•×˜×” â€“ ×—×–×¨×” ×œ×“×£ ×”×‘×™×ª / index
        // (×‘×©×œ×‘ ×”×–×” ×¨×§ ×¡×•×’×¨ ××ª ×”××¡×š. ×× ×ª×¨×¦×” × × ×ª×§ ×’× ××”××©×—×§ ×‘×¦×“ ×”×©×¨×ª)
        window.location.href = "home.html";
      });
    }

    // ×”××–× ×” ×œ××™×¨×•×¢×™× ××”×©×¨×ª
    socket.on("gameState", (game) => {
      if (!game || (currentGameCode && game.code && game.code !== currentGameCode)) {
        return;
      }
      renderGameStateForPlayer(game);
    });

    socket.on("gameUpdated", (game) => {
      if (!game || (currentGameCode && game.code && game.code !== currentGameCode)) {
        return;
      }
      renderGameStateForPlayer(game);
    });

    socket.on("gameEnded", (data) => {
      if (data && data.code && currentGameCode && data.code !== currentGameCode) return;
      roundStatusPlayerEl.textContent = "×”××©×—×§ ×”×¡×ª×™×™×. ×ª×•×“×” ×©×©×™×—×§×ª×! ğŸ‰";
      updateTimerFromGame(null);
    });

    socket.on("removedFromGame", (data) => {
      alert("×”×•×¡×¨×ª ××”××©×—×§ ×¢×œ ×™×“×™ ×”×× ×”×œ.");
      // ××¤×©×¨ ×œ×”×—×–×™×¨ ×œ××¡×š ×”×¦×˜×¨×¤×•×ª
      myClientId = null;
      myTeamId = null;
      if (gameSection) gameSection.classList.add("hidden");
      if (joinSection) joinSection.classList.remove("hidden");
    });

    // â­ ×¤×•×¤Ö¾××¤ ×¡×•×£ ×©×¢×•×Ÿ â€“ ×¡×¢×™×¤×™× 1 + 4
    socket.on("roundTimeUp", (data) => {
      if (!data) return;
      if (data.code && currentGameCode && data.code !== currentGameCode) return;

      const score = typeof data.roundScore === "number" ? data.roundScore : 0;

      let msgLine;
      if (score <= 5) {
        msgLine = "××ª× ×¦×•×•×ª ×—×œ×©, ×›×“××™ ×©×ª×ª××× ×• ×™×•×ª×¨";
      } else if (score <= 10) {
        msgLine = "××ª× ×¦×•×•×ª × ×—××“, ×‘×˜×•×— ×©××ª× ×™×›×•×œ×™× ×™×•×ª×¨";
      } else {
        msgLine = "××ª× ×¦×•×•×ª ×¢×œ, ×”×©××¨×ª× ×œ×”× ××‘×§...";
      }

      alert("â± × ×’××¨ ×”×–××Ÿ!\n\n" + msgLine + `\n\n(××¡×¤×¨ ×ª×©×•×‘×•×ª × ×›×•× ×•×ª ×‘×¡×™×‘×•×‘: ${score})`);
    });

    // ×§×¨×™××ª ×¤×¨××˜×¨×™× ××”-URL (code / teamId / name / autoJoin)
    (function initFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const codeParam = (params.get("code") || "").toUpperCase();
      const teamParam = params.get("teamId") || "";
      const teamNameParam = params.get("teamName") || "";
      const autoJoin = params.get("autoJoin") === "1";
      const nameParam = params.get("name") || "";

      if (codeParam && gameCodeInput) {
        gameCodeInput.value = codeParam;
        currentGameCode = codeParam;

        // × ×˜×¢×Ÿ ××¦×‘ ××©×—×§ ×›×“×™ ×œ××œ× ×§×‘×•×¦×•×ª
        socket.emit("getGameState", { gameCode: codeParam }, (resp) => {
          if (resp && resp.ok && resp.game) {
            renderGameStateForPlayer(resp.game);
            updateJoinTeamSelect(resp.game, teamParam || null);
          }
        });
      }

      if (nameParam && playerNameInput) {
        playerNameInput.value = nameParam;
      }

      // ×× ×™×© teamName ×‘×¤×¨××˜×¨ â€“ ××¤×©×¨ ×œ×”×¦×™×’ ×œ××¢×œ×” ×œ×”×¡×‘×¨
      if (teamNameParam && topStatus) {
        topStatus.textContent =
          `×§×™×‘×œ×ª ×”×–×× ×” ×œ×”×¦×˜×¨×£ ×œ×§×‘×•×¦×” "${teamNameParam}". ×ª×›×ª×•×‘ ×©× ×•×ª×œ×—×¥ ×”×¦×˜×¨×¤×•×ª.`;
      }

      // autoJoin â€“ ××©××© ×‘×¢×™×§×¨ ×œ×× ×”×œ ×©× ×›× ×¡ ×›×©×—×§×Ÿ
      if (autoJoin && codeParam && nameParam) {
        joinGameAsPlayer(codeParam, nameParam, teamParam || null);
      }
    })();

    // ×˜×¢×™× ×ª ×œ×•×’×• ×•×‘×× ×¨ ×œ××¡×š ×©×—×§×Ÿ (×œ×¡×¢×™×£ 8)
    (function loadBrandingForPlayer() {
      fetch("/api/banners")
        .then((res) => res.json())
        .then((data) => {
          if (!data) return;

          if (data.logoUrl && playerLogoEl) {
            playerLogoEl.src = data.logoUrl;
            playerLogoEl.alt = "××™×œ×× ×™×”";
            playerLogoEl.classList.remove("hidden");
            playerLogoEl.addEventListener("error", () => {
              playerLogoEl.classList.add("hidden");
            });
          }

          if (playerBannerSlot && data.playerBannerHtml) {
            playerBannerSlot.innerHTML = data.playerBannerHtml;
          }
        })
        .catch(() => {});
    })();
  </script>
</body>
</html>
